function CharMode(e){return e>=48&&57>=e?1:e>=65&&90>=e?2:e>=97&&122>=e?4:8}function bitTotal(e){for(modes=0,i=0;i<4;i++)1&e&&modes++,e>>>=1;return modes}function checkStrong(e){if(e.length<=4)return 0;for(Modes=0,i=0;i<e.length;i++)Modes|=CharMode(e.charCodeAt(i));return bitTotal(Modes)}function AccountIsExist(e){TestAccount($("#username").val())&&$.ajax("/user/userExists/"+$("[name='username']").val(),{dataType:"json",type:"GET",xhrFields:{withCredentials:!0},success:function(t){0!=t.err?(layer.close(TipsIndex.accountTipsIndex),TipsIndex.accountTipsIndex=layer.tips(t.msg,"#username",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.account=!1):t.data.Exists?(layer.close(TipsIndex.accountTipsIndex),TipsIndex.accountTipsIndex=layer.tips("用户名已经存在!","#username",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.account=!1):(e||(layer.close(TipsIndex.accountTipsIndex),TipsIndex.accountTipsIndex=layer.tips("用户名可用!","#username",{shift:-1,tips:[2,"#6BC827"],tipsMore:!0})),RegistersStepOne.account=!0)}})}function EmailIsExist(e){TestEmail($("#useremail").val())&&$.ajax("/user/emailExists/"+$("[name='useremail']").val(),{dataType:"json",type:"GET",xhrFields:{withCredentials:!0},success:function(t){0!=t.err?(layer.close(TipsIndex.emailTipsIndex),TipsIndex.emailTipsIndex=layer.tips(t.msg,"#useremail",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.email=!1):t.data.Exists?(layer.close(TipsIndex.emailTipsIndex),TipsIndex.emailTipsIndex=layer.tips("邮箱地址已注册!","#useremail",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.email=!1):(e||(layer.close(TipsIndex.emailTipsIndex),TipsIndex.emailTipsIndex=layer.tips("邮箱地址可用!","#useremail",{shift:-1,tips:[2,"#6BC827"],tipsMore:!0})),RegistersStepOne.email=!0)}})}function TelIsExist(e){TestTel($("#usertel").val())&&$.ajax("/user/phoneExists/"+$("[name='usertel']").val(),{dataType:"json",type:"GET",xhrFields:{withCredentials:!0},success:function(t){0!=t.err?(layer.close(TipsIndex.telTipsIndex),TipsIndex.telTipsIndex=layer.tips(t.msg,"#usertel",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.tel=!1):t.data.Exists?(layer.close(TipsIndex.telTipsIndex),TipsIndex.telTipsIndex=layer.tips("手机号已注册!","#usertel",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.tel=!1):(e||(layer.close(TipsIndex.telTipsIndex),TipsIndex.telTipsIndex=layer.tips("手机号可用!","#usertel",{shift:-1,tips:[2,"#6BC827"],tipsMore:!0})),RegistersStepOne.tel=!0)}})}function stepOne(){return!!(RegistersStepOne.account&&RegistersStepOne.email&&RegistersStepOne.tel)}function stepTwo(){return!!RegistersStepTwo.code}var getLocalTime=function(e){return new Date(1e3*parseInt(e)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," ")},setPage=function(e,t,s){if(0>=t)e.html("").hide();else if(t>0&&5>=t){e.html("").show();var i="";1==s?(e.attr("data-flag",1),i='<li class="prev disable" data-num="-1"><span>prev</span></li>'):i='<li class="prev" data-num="-1"><span>prev</span></li>';for(var n=1;t>=n;n++)i+=s==n?'<li class="active" data-num='+n+"><span>"+n+"</span></li>":"<li data-num="+n+"><span>"+n+"</span></li>";s==t?(e.attr("data-flag",t),i+='<li class="next" disable data-num="0"><span>prev</span></li>'):i+='<li class="next" data-num="0"><span>prev</span></li>',e.html(i)}else{e.html("").show();var i="";1==s?(e.attr("data-flag",1),i='<li class="prev disable" data-num="-1"><span>prev</span></li>'):i='<li class="prev" data-num="-1"><span>prev</span></li>';for(var n=1;5>=n;n++)2>=s?i+=2>=n?s==n?'<li class="active" data-num='+n+"><span>"+n+"</span></li>":"<li data-num="+n+"><span>"+n+"</span></li>":3==n?'<li class="more-page"><span>...</span></li>':"<li data-num="+(t-(5-n))+"><span>"+(t-(5-n))+"</span></li>":2>t-s?i+=2>=n?"<li data-num="+n+"><span>"+n+"</span></li>":3==n?'<li class="more-page"><span>...</span></li>':s==t-(5-n)?'<li class="active" data-num='+(t-(5-n))+"><span>"+(t-(5-n))+"</span></li>":"<li data-num="+(t-(5-n))+"><span>"+(t-(5-n))+"</span></li>":1==n?i+="<li data-num="+n+"><span>"+n+"</span></li>":3==n?(i+="<li data-num="+(s-1)+"><span>"+(s-1)+"</span></li>",i+='<li class="active" data-num='+s+"><span>"+s+"</span></li>",i+="<li data-num="+(s+1)+"><span>"+(s+1)+"</span></li>"):i+=5==n?"<li data-num="+(t-(5-n))+"><span>"+(t-(5-n))+"</span></li>":'<li class="more-page"><span>...</span></li>';s==t?(e.attr("data-flag",t),i+='<li class="next" disable data-num="0"><span>prev</span></li>'):i+='<li class="next" data-num="0"><span>prev</span></li>',e.html(i)}},LoginSubmit=function(e){13==e.keyCode&&$(".btn-login").click()},RegisterSubmit=function(e){if(13==e.keyCode)if(1==parseInt($(".register-step").attr("data-step")))$(".step").find(".first-step-btn").click(),$(".register-step").attr("data-step",2);else{if(2!=parseInt($(".register-step").attr("data-step")))return;$(".step").find(".second-step-btn").click(),$(".register-step").attr("data-step",3)}},ChangePwdSubmit=function(e){13==e.keyCode&&$(".changepwd-btn").click()},pwStrength=function(e){if(O_color="#AEC597",L_color="#FF0000",M_color="#FF9900",H_color="#33CC00",null==e||""==e)Lcolor=Mcolor=Hcolor=O_color;else switch(S_level=checkStrong(e),S_level){case 0:Lcolor=Mcolor=Hcolor=O_color;case 1:Lcolor=L_color,Mcolor=Hcolor=O_color;break;case 2:Lcolor=Mcolor=M_color,Hcolor=O_color;break;default:Lcolor=Mcolor=Hcolor=H_color}$(".pwdqu").find("em")[0].style.background=Lcolor,$(".pwdqu").find("em")[1].style.background=Mcolor,$(".pwdqu").find("em")[2].style.background=Hcolor},TipsIndex={accountTipsIndex:-1,emailTipsIndex:-1,telTipsIndex:-1,codeTipsIndex:-1,pwdTipsIndex:-1,pwdsTipsIndex:-1,oldPwdTipsIndex:-1},RegistersStepOne={account:!1,email:!1,tel:!1},RegistersStepTwo={code:!1},TestAccount=function(e){var t=/^[0-9a-zA-Z]+$/,s=/^\d+$/;return""==e?(layer.close(TipsIndex.accountTipsIndex),TipsIndex.accountTipsIndex=layer.tips("用户名不能为空!","#username",{shift:-1,tipsMore:!0,time:0}),!1):e.length<6?(layer.close(TipsIndex.accountTipsIndex),TipsIndex.accountTipsIndex=layer.tips("用户名过短,至少是6位字母和数字组成!","#username",{shift:-1,tipsMore:!0,time:0}),!1):t.test(e)?s.test(e)?(layer.close(TipsIndex.accountTipsIndex),TipsIndex.accountTipsIndex=layer.tips("账户不能由纯数字组成！","#username",{shift:-1,tipsMore:!0,time:0}),!1):(layer.close(TipsIndex.accountTipsIndex),!0):(layer.close(TipsIndex.accountTipsIndex),TipsIndex.accountTipsIndex=layer.tips("用户名6-20位,由字母和数字组成,不能是纯数字!","#username",{shift:-1,tipsMore:!0,time:0}),!1)},TestEmail=function(e){var t=/^[_\/.a-z0-9]+@[a-z0-9]+[\/.][a-z0-9]{2,}$/;return""==e?(layer.close(TipsIndex.emailTipsIndex),TipsIndex.emailTipsIndex=layer.tips("邮箱不能为空!","#useremail",{shift:-1,tipsMore:!0,time:0}),!1):t.test(e)?(layer.close(TipsIndex.emailTipsIndex),!0):(layer.close(TipsIndex.emailTipsIndex),TipsIndex.emailTipsIndex=layer.tips("邮箱格式不正确，请重新输入","#useremail",{shift:-1,tipsMore:!0,time:0}),!1)},TestTel=function(e,t){var s=/^13[\d]{9}$|^14[5,7]{1}\d{8}$|^15[^4]{1}\d{8}$|^17[0,6,7,8]{1}\d{8}$|^18[\d]{9}$/;return""==e?(t||(layer.close(TipsIndex.telTipsIndex),TipsIndex.telTipsIndex=layer.tips("手机号码不能为空!","#usertel",{shift:-1,tipsMore:!0,time:0})),!1):s.test(e)?(layer.close(TipsIndex.telTipsIndex),!0):(t||(layer.close(TipsIndex.telTipsIndex),TipsIndex.telTipsIndex=layer.tips("手机号码格式不正确，请重新输入","#usertel",{shift:-1,tipsMore:!0,time:0})),!1)},TestCode=function(e){return""==e?(layer.close(TipsIndex.codeTipsIndex),TipsIndex.codeTipsIndex=layer.tips("验证码不能为空!","#telcode",{shift:-1,tipsMore:!0,time:0}),!1):!0},TestCode2=function(e){return""==e?(layer.close(TipsIndex.codeTipsIndex),TipsIndex.codeTipsIndex=layer.tips("验证码不能为空!","#telcodebytel",{shift:-1,tipsMore:!0,time:0}),!1):!0},timer=null;$("#telcode").on("click",function(){GetCode()}),$("#telcodebytel").on("click",function(){GetCodeByTel()});var GetCode=function(){var e=$("#telcode");e.hasClass("disable")||(TestTel($("#usertel").val(),!0)?$.ajax("/user/phoneExists/"+$("[name='phone']").val(),{dataType:"json",type:"GET",xhrFields:{withCredentials:!0},success:function(t){0!=t.err?(layer.close(TipsIndex.codeTipsIndex),TipsIndex.codeTipsIndex=layer.tips(t.msg,"#telcode",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.code=!1):t.data.Exists?(layer.close(TipsIndex.codeTipsIndex),TipsIndex.codeTipsIndex=layer.tips("手机号已注册!","#telcode",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.code=!1):(layer.close(TipsIndex.codeTipsIndex),TipsIndex.codeTipsIndex=layer.tips("验证短信已发送!","#telcode",{shift:-1,tips:[2,"#6BC827"],tipsMore:!0,time:0}),RegistersStepOne.code=!0,timer&&clearInterval(timer),$.ajax("/user/sendVCode/"+$("[name='phone']").val(),{type:"GET",dataType:"json",success:function(t){if(0==t.err){var s=120;timer=setInterval(function(){e.addClass("disable").text("重新发送("+s+")"),s--,0==s&&(clearInterval(timer),e.removeClass("disable").text("重新发送"))},1e3)}}}))}}):(layer.close(TipsIndex.codeTipsIndex),TipsIndex.codeTipsIndex=layer.tips("请先输入您的手机号码!","#telcode",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.code=!1))},GetCodeByTel=function(){var e=$("#telcodebytel");e.hasClass("disable")||(TestTel($("#usertel").val(),!0)?(layer.close(TipsIndex.codeTipsIndex),TipsIndex.codeTipsIndex=layer.tips("验证短信已发送!","#telcodebytel",{shift:-1,tips:[2,"#6BC827"],tipsMore:!0,time:0}),RegistersStepOne.code=!0,timer&&clearInterval(timer),$.ajax("/user/sendVCode/"+$("[name='phone']").val(),{type:"GET",dataType:"json",success:function(t){if(0==t.err){var s=120;timer=setInterval(function(){e.addClass("disable").text("重新发送("+s+")"),s--,0==s&&(clearInterval(timer),e.removeClass("disable").text("重新发送"))},1e3)}}})):(layer.close(TipsIndex.telTipsIndex),TipsIndex.codeTipsIndex=layer.tips("请先输入您的手机号码!","#usertel",{shift:-1,tipsMore:!0,time:0}),RegistersStepOne.code=!1))},TestPwd=function(e){return""==e?(layer.close(TipsIndex.pwdTipsIndex),TipsIndex.pwdTipsIndex=layer.tips("密码不能为空!","#pwd",{shift:-1,tipsMore:!0,time:0}),!1):e.length<6||e.length>20?(layer.close(TipsIndex.pwdTipsIndex),TipsIndex.pwdTipsIndex=layer.tips("密码长度过短,应是6-20位字符或数字!","#pwd",{shift:-1,tipsMore:!0,time:0}),!1):($("#oldpwd").val()==$("#pwd").val()&&(layer.close(TipsIndex.pwdTipsIndex),TipsIndex.pwdTipsIndex=layer.tips("新密码不能原来密码相同！","#pwd",{shift:-1,tipsMore:!0,time:0}),RegistersStepTwo.pwd=!1,stepTwo()),$("#pwds").val()&&TestSPwd(),layer.close(TipsIndex.pwdTipsIndex),!0)},TestSPwd=function(e){return""==$("#pwds").val()?(layer.close(TipsIndex.pwdsTipsIndex),TipsIndex.pwdsTipsIndex=layer.tips("密码不能为空!","#pwds",{shift:-1,tipsMore:!0,time:0}),!1):$("#pwds").val()!=$("#pwd").val()?(layer.close(TipsIndex.pwdsTipsIndex),TipsIndex.pwdsTipsIndex=layer.tips("两次输入的密码不相同!","#pwds",{shift:-1,tipsMore:!0,time:0}),!1):(layer.close(TipsIndex.pwdsTipsIndex),!0)},TestOldPwd=function(e){return""==e?(layer.close(TipsIndex.oldPwdTipsIndex),TipsIndex.oldPwdTipsIndex=layer.tips("密码不能为空!","#oldpwd",{shift:-1,tipsMore:!0,time:0}),!1):e.length<6||e.length>20?(layer.close(TipsIndex.oldPwdTipsIndex),TipsIndex.oldPwdTipsIndex=layer.tips("密码长度过短,应是6-20位字符或数字!","#oldpwd",{shift:-1,tipsMore:!0,time:0}),!1):($("#pwd").val()&&TestPwd($("#pwd")),layer.close(TipsIndex.oldPwdTipsIndex),!0)};$(document).ready(function(){function clearNoNum(e){e.val(e.val().replace(/[^\d.]/g,"")),e.val(e.val().replace(/^\./g,"")),e.val(e.val().replace(/\.{2,}/g,".")),e.val(e.val().replace(".","$#$").replace(/\./g,"").replace("$#$",".")),e.val(e.val().replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"))}function getOverView(){$.get("/center/overview/",function(result){var rows=$(".user-info-two").find(".row"),data=eval("("+result+")").data,tNums=0,tTimes=0,tCosts=0;$.each(data.UserCenterInfo,function(e,t){switch(parseInt(t.HostType)){case 1:$($(rows[2]).find(".col")[1]).find("p").text(t.HostNum),$($(rows[2]).find(".col")[2]).find("p").text(t.HostOnlineTime),$($(rows[2]).find(".col")[3]).find("p").text(t.HostCosts);break;case 2:$($(rows[1]).find(".col")[1]).find("p").text(t.HostNum),$($(rows[1]).find(".col")[2]).find("p").text(t.HostOnlineTime),$($(rows[1]).find(".col")[3]).find("p").text(t.HostCosts);break;case 3:$($(rows[0]).find(".col")[1]).find("p").text(t.HostNum),$($(rows[0]).find(".col")[2]).find("p").text(t.HostOnlineTime),$($(rows[0]).find(".col")[3]).find("p").text(t.HostCosts)}tNums+=parseInt(t.HostNum),tTimes+=parseInt(t.HostOnlineTime),tCosts+=parseInt(t.HostCosts)}),$(rows[3]).find(".col").find("p").text(tCosts)})}if($(".login-box").length>0){!function(e,t){function s(e){var s,i=t.createElement("iframe"),n="https://open.weixin.qq.com/connect/qrconnect?appid="+e.appid+"&scope="+e.scope+"&redirect_uri="+e.redirect_uri+"&state="+e.state+"&login_type=jssdk";n+=e.style?"&style="+e.style:"",n+=e.href?"&href="+e.href:"",i.src=n,i.frameBorder="0",i.allowTransparency="true",i.scrolling="no",i.width="300px",i.height="400px",s=t.getElementById(e.id),s.innerHTML="",s.appendChild(i)}e.WxLogin=s}(window,document),$(window).resize(function(){setLoginPos()});var setLoginPos=function(e){var t=$(".login-box"),s=0==t.width()?$(t[1]):$(t[0]),i=$(".btn-by-way"),n=$(".login-footer"),a=$(".msg"),r=$("body").width(),o=$("body").height(),l=352,d=s.height();e?(t.stop().animate({top:(o-d)/2},200),i.stop().animate({top:(o-d)/2,left:(r-l)/2+l+50},200),a.stop().animate({top:(o-d)/2+125,left:(r-l)/2},200)):(t.css({top:(o-d)/2}),i.css({top:(o-d)/2,left:(r-l)/2+l+50}),a.css({top:(o-d)/2+125,left:(r-l)/2})),parseInt(n.css("top"))<=760&&n.css({top:670}),o>760&&n.css({top:o-90})},turn=function(e,t,s){e.stop().animate(s[0],t,function(){$(this).hide().siblings(".login-box").show().animate(s[1],t,function(){setLoginPos(!0)})})},verticalOpts=[{width:0,borderColor:"transparent"},{width:"352px"}];setLoginPos(),$(".btn").on("click",function(){$(".by-weixin"),$(".by-account");$(this).hasClass("btn-by-weixin")?($(".box-1").animate({marginLeft:0},{queue:!1,duration:400,complete:function(){$(".btn-by-way").find(".tip").text("账户登录")}}),$(".msg").hide(),turn($(".login-box.by-account"),100,verticalOpts)):($(".box-1").stop().animate({marginLeft:"-80px"},{queue:!1,duration:400,complete:function(){$(".btn-by-way").find(".tip").text("扫码登录")}}),turn($(".login-box.by-weixin"),100,verticalOpts))});var obj=new WxLogin({id:"login-container",appid:"wx06ffb7b4e9912fca",scope:"snsapi_login",redirect_uri:"http://www.ghostcloud.cn/weixin/login/callback",state:"",style:"",href:""});$("#loginform").submit(function(e){if(e.preventDefault(),""==$(".input-box").find("[name='name']").val())return layer.tips("用户名不能为空!",".name",{tipsMore:!0}),!1;if(""==$(".input-box").find("[name='pwd']").val())return layer.tips("密码不能为空!",".pwd",{tipsMore:!0}),!1;var t=$(this).serializeArray(),s=$(this).attr("action");$.ajax({url:s,type:"POST",data:t,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){return 0!=e.err?void $(".msg").show().text(e.msg).attr("title",e.msg):void(window.location.href="/home/user_info.html")}})}),$(".btn-login").click(function(){$("#loginform").submit()})}if($(".register-box").length>0){var setRegisterPos=function(e){var t=$(".register-box"),s=$(".register-footer"),i=($("body").width(),$("body").height());t.css({top:(i-600)/2}),parseInt(s.css("top"))<=760&&s.css({top:670}),i>760&&s.css({top:i-90})};$(window).resize(function(){setRegisterPos()}),setRegisterPos(),$("#register-form").submit(function(e){e.preventDefault();var t=$(this).serializeArray(),s=$(this).attr("action");$.ajax({url:s,type:"POST",data:t,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){return 0!=e.err?(layer.close(TipsIndex.codeTipsIndex),void layer.tips(e.msg,"#telcode",{})):($(".register-process").find(".line-2").find("span").stop().animate({width:"200px"},{queue:!1,duration:300,complete:function(){$(".register-process").find(".three").find("area").stop().animate({width:"42px"},{queue:!1,duration:100})}}),void $(".register-step-box").stop().animate({marginLeft:"-900px"},{queue:!1,duration:400,complete:function(){}}))}})}),$(".step").find(".btn").on("click",function(e){if(e.preventDefault(),$(this).hasClass("first-step-btn"))AccountIsExist(!0),EmailIsExist(!0),TelIsExist(!0),setTimeout(function(){console.log(RegistersStepOne),stepOne()&&($(".register-process").find(".line-1").find("span").stop().animate({width:"200px"},{queue:!1,duration:300,complete:function(){$(".register-process").find(".two").find("area").stop().animate({width:"42px"},{queue:!1,duration:100})}}),$(".register-step-box").stop().animate({marginLeft:"-450px"},{queue:!1,duration:400,complete:function(){}}))},100);else if($(this).hasClass("second-step-btn")&&TestCode($(".telcode").val())&&TestPwd($("#pwd").val())&&TestSPwd()){if(stepTwo())return layer.close(TipsIndex.codeTipsIndex),void(TipsIndex.codeTipsIndex=layer.tips("验证码错误!","#telcode",{shift:-1,tipsMore:!0,time:0}));$("#register-form").submit()}})}if($(".user-changepwd-box").length>0&&($("#changepwd-form").submit(function(e){e.preventDefault();var t=$(this).serializeArray(),s=$(this).attr("action");TestOldPwd($("#oldpwd").val())&&TestPwd($("#pwd").val())&&TestSPwd()&&$.ajax({url:s,type:"POST",data:t,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){return 0!=e.err?(layer.close(TipsIndex.oldPwdTipsIndex),void(TipsIndex.oldPwdTipsIndex=layer.tips(e.msg,"#oldpwd",{shift:-1,tipsMore:!0,time:0}))):void layer.alert("修改密码成功",{skin:"layui-layer-lan",closeBtn:0,shift:2})}})}),$(".changepwd-btn").on("click",function(){$("#changepwd-form").submit()})),$(".changepwd-box").length>0){var setRegisterPos=function(e){var t=$(".changepwd-box"),s=$(".register-footer"),i=($("body").width(),$("body").height());t.css({top:(i-600)/2}),parseInt(s.css("top"))<=760&&s.css({top:670}),i>760&&s.css({top:i-90})};$(window).resize(function(){setRegisterPos()}),setRegisterPos(),$("#changepwd-form").submit(function(e){e.preventDefault();var t=$(this).serializeArray(),s=$(this).attr("action");$.ajax({url:s,type:"POST",data:t,dataType:"json",xhrFields:{withCredentials:!0},success:function(e){return 0!=e.err?void(TipsIndex.telTipsIndex=layer.tips(e.msg,"#usertel",{shift:-1,tipsMore:!0,time:0})):void layer.confirm("密码修改成功！",{btn:["确定"]},function(){window.location.href="/home/login.html"})}})}),$(".changepwd-btn").on("click",function(){if(TelIsExist(!0),RegistersStepOne.tel&&TestCode2($(".telcode").val())&&TestPwd($("#pwd").val())&&TestSPwd()){if(stepTwo())return layer.close(TipsIndex.codeTipsIndex),void(TipsIndex.codeTipsIndex=layer.tips("验证码错误!","#telcodebytel",{shift:-1,tipsMore:!0,time:0}));$("#changepwd-form").submit()}})}if($(".container-user-nav").length>0){if($("#start").length>0&&$("#end").length>0){$("#start").on("click",function(){$(this).addClass("active")}),$("#end").on("click",function(){$(this).addClass("active")});var start={elem:"#start",format:"YYYY-MM-DD",max:"2099-06-16 23:59:59",istime:!0,istoday:!1,choose:function(e){end.min=e,end.start=e}},end={elem:"#end",format:"YYYY-MM-DD",max:"2099-06-16 23:59:59",istime:!0,istoday:!1,choose:function(e){start.max=e}};laydate(start),laydate(end);var orderInfo=[],showlen=10,showOrderByPage=function(e,t,s){var i=t*s;if(!(i-e.length>=s)){var n='<p class="order-no w240">订单号</p><p class="order-info w280">订单信息</p><p class="order-status w80">订单状态</p><p class="order-ctime w160">订单创建时间</p><p class="order-playway w80">支付方式</p><p class="order-amount w100">支付金额</p>';$(".records").html("").append('<div class="record-title">'+n+"</div>"),i=i-e.length<0?i:e.length;for(var a=t*s-s;i>a;a++){var r="alipay"==e[a].ChargeType?"支付宝":"微信",o=2==e[a].State?"已支付":"未支付";n='<p class="order-no w240">'+e[a].OrderID+'</p><p class="order-info w280" title="'+e[a].OrderInfo+'">'+e[a].OrderInfo+'</p><p class="order-status w80">'+o+'</p><p class="order-ctime w160">'+getLocalTime(e[a].CreateTime)+'</p><p class="order-playway w80">'+r+'</p><p class="order-amount w100">'+e[a].Amount/100+"</p>",$(".records").append('<div class="record-list">'+n+"</div>")}setPage($(".page"),parseInt(e.length/s+.5),t)}};$(".search-btn").on("click",function(){var ftime=$("#start").text()+" 00:00:00",ltime=$("#end").text()+" 23:59:59";$.get("/center/rechargehistory/"+ftime+"/"+ltime,function(result){$(".records").attr("data-page",1);var data=eval("("+result+")").data,index=0;$.each(data.Orders,function(e,t){t.OrderID&&(orderInfo[index++]=t)});var page=$(".records").attr("data-page");showOrderByPage(orderInfo,page,showlen)})}),$(".page").find("li").on("click",function(){var e=$(".records").attr("data-page");if($(this).hasClass("prev")){if(0>=e-1)return;showOrderByPage(orderInfo,e-1,showlen),$(".records").attr("data-page",e-1)}else if($(this).hasClass("next")){if(e+1>parseInt(orderInfo.length/showlen+.5))return;showOrderByPage(orderInfo,e+1,showlen),$(".records").attr("data-page",e+1)}else{if($(this).hasClass("more-page"))return;if(e=$(this).attr("data-num"),0>=e||e>parseInt(orderInfo.length/showlen+.5))return;showOrderByPage(orderInfo,e,showlen),$(".records").attr("data-page",e)}})}$(".user-recharge-box").length>0&&("undefined"!=typeof userInfo&&"undefined"!=typeof userInfo.data&&"undefined"!=typeof userInfo.data.UserInfo&&("undefined"!=typeof userInfo.data.UserInfo.remain?$(".user-recharge-one").find(".title").find("em").text(userInfo.data.UserInfo.remain/100):$(".user-recharge-one").find(".title").find("em").text("00.00")),$(".charge-amount").find(".amount").on("keyup",function(){clearNoNum($(this))}),$(".charge-way").find(".play").on("click",function(){$(this).addClass("active").siblings(".play").removeClass("active"),$(this).hasClass("weixinplay")?$(".charge-amount").attr("data-playway",2):$(".charge-amount").attr("data-playway",1)}),$(".btn-play").click(function(){if(1==parseInt($(".charge-amount").attr("data-playway"))){var fee=$("[name='amount']").val();fee>0?$.get("/order/dpay/create/"+fee,function(result){$("#dpay-form").empty();var inputTpl='<input type="hidden" name="{0}" value="{1}">',data=eval("("+result+")").data;for(var prop in data)$("#dpay-form").append(inputTpl.replace("{0}",prop).replace("{1}",data[prop]));$("#dpay-form").submit()}):layer.tips("充值费用输入有误！",".amount",{tips:[2,"#78BA32"]})}else{var fee=$("[name='amount']").val();fee>0?$.get("/order/weixinpay/create/"+fee,function(result){var results=eval("("+result+")");0==results.err?($("#weixinpay-qrcode").qrcode({width:256,height:256,text:results.data}),layer.open({type:1,title:!1,closeBtn:1,skin:"layui-layer-nobg",shadeClose:!0,content:$(".weixinpay-qrcode-box")})):layer.alert(results.msg,{icon:5})}):layer.tips("充值费用输入有误！",".amount",{tips:[2,"#78BA32"]})}})),"undefined"!=typeof userInfo&&"undefined"!=typeof userInfo.data&&"undefined"!=typeof userInfo.data.UserInfo&&("undefined"!=typeof userInfo.data.UserInfo.username&&$("#userName").find("p").text(userInfo.data.UserInfo.username),"undefined"!=typeof userInfo.data.UserInfo.remain?$(".user-balance").find(".content").find("em").text(userInfo.data.UserInfo.remain/100):$(".user-balance").find(".content").find("em").text("00.00"),"undefined"!=typeof userInfo.data.UserInfo.lastlogintime&&$("#lasttime").find("p").text(getLocalTime(userInfo.data.UserInfo.lastlogintime)),"undefined"!=typeof userInfo.data.UserInfo.mail&&$("#useremail").find("p").text(userInfo.data.UserInfo.mail),"undefined"!=typeof userInfo.data.UserInfo.phonenum&&$("#usertel").find("p").text(userInfo.data.UserInfo.phonenum)),$(".user-info-two").length>0&&getOverView()}$(".product-app-content").length>0&&$(".app-nav").find(".option").on("click",function(){var e=$(".app-nav").find(".option").index($(this));$(this).addClass("active").siblings(".option").removeClass("active"),$(".app-options").eq(e).css({display:"block"}).siblings(".app-options").css({display:"none"})})});